<!doctype html><html lang="zh-Hant"><head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>幸福教養課程管理</title>
<meta name="theme-color" content="#1f3a2e"/>
<link rel="manifest" href="./manifest.json"/>
<link rel="icon" href="./icons/icon-192.png"/>
<link rel="apple-touch-icon" href="./icons/icon-192.png"/>
<link rel="stylesheet" href="./styles.css"/>
</head><body>
<header class="topbar">
  <div class="brand">
    <span class="dot"></span>
    <div>
      <div class="title">幸福教養課程管理</div>
      <div class="sub">工具庫存 × 課程管理 × 模組組合</div>
    </div>
  </div>
  <button id="btn-install" class="btn ghost" hidden>一鍵安裝</button>
</header>

<main class="wrap">
  <section class="card">
    <div class="row between">
      <div class="tabs">
        <button class="tabbtn on" data-tab="tools">工具庫存</button>
        <button class="tabbtn" data-tab="courses">課程管理</button>
        <button class="tabbtn" data-tab="scripts">文稿存取</button>
        <button class="tabbtn" data-tab="builder">模組組合</button>
        <button class="tabbtn" data-tab="api">API 測試</button>
      </div>
      <button id="btn-refresh" class="btn">重新抓取</button>
    </div>

    <div class="hr"></div>

    <section id="tools" class="tab on">
      <div class="row gap">
        <input id="tools-q" class="input" placeholder="搜尋工具（名稱/ID/分類/標籤）"/>
        <select id="tools-cat" class="select"><option value="">全部分類</option></select>
      </div>
      <div class="hint">資料來源：工具庫存管理 API（取代 data/tools.csv）</div>
      <div id="tools-list" class="list"></div>
    </section>

    <section id="courses" class="tab">
      <div class="row gap">
        <select id="course-state" class="select">
          <option value="final">完稿</option><option value="draft">草稿</option><option value="idea">發想</option>
        </select>
        <input id="course-q" class="input" placeholder="搜尋課程（標題/ID/標籤/摘要）"/>
        <select id="course-status" class="select">
          <option value="">全部狀態</option><option value="ready">ready</option><option value="draft">draft</option>
          <option value="idea">idea</option><option value="archived">archived</option>
        </select>
      </div>
      <div class="hint">檢視三分頁資料（發想/草稿/完稿）。</div>
      <div id="courses-list" class="list"></div>
    </section>

    
    <section id="scripts" class="tab">
      <div class="hint"><b>把課程的「PPT/講稿/口播/主持稿」集中在這裡編輯與存回後臺</b><br/>操作：在「課程管理」點「文稿」→ 會自動載入到這一頁。</div>

      <div class="row gap">
        <select id="script-state" class="select">
          <option value="final">完稿</option><option value="draft">草稿</option><option value="idea">發想</option>
        </select>
        <input id="script-id" class="input" placeholder="課程 ID（可由清單一鍵帶入）"/>
        <button id="btn-script-load" class="btn">載入</button>
        <button id="btn-script-save" class="btn primary">存回後臺</button>
        <button id="btn-script-local" class="btn ghost">存本機草稿</button>
      </div>

      <div class="row gap">
        <input id="script-title" class="input" placeholder="課程名稱（title）"/>
        <input id="script-version" class="input" placeholder="版本（version，可空）"/>
      </div>

      <div class="row gap">
        <textarea id="script-ppt" class="textarea" rows="6" placeholder="PPT 大綱（ppt_outline）"></textarea>
      </div>

      <div class="row gap">
        <textarea id="script-page" class="textarea" rows="8" placeholder="逐頁講稿（page_script）"></textarea>
      </div>

      <div class="row gap">
        <textarea id="script-voice" class="textarea" rows="8" placeholder="影音口播稿（voiceover_script）"></textarea>
      </div>

      <div class="row gap">
        <textarea id="script-host" class="textarea" rows="8" placeholder="演說/主持稿（host_script）"></textarea>
      </div>

      <div class="row gap">
        <textarea id="script-homework" class="textarea" rows="6" placeholder="教材/作業/練習（materials / homework）"></textarea>
      </div>

      <div class="row gap">
        <button class="btn ghost copy" data-copy="#script-ppt">一鍵複製：PPT</button>
        <button class="btn ghost copy" data-copy="#script-page">一鍵複製：逐頁講稿</button>
        <button class="btn ghost copy" data-copy="#script-voice">一鍵複製：口播稿</button>
        <button class="btn ghost copy" data-copy="#script-host">一鍵複製：主持稿</button>
        <button class="btn ghost copy" data-copy="#script-homework">一鍵複製：教材/作業</button>
      </div>

      <div class="hint">貼給 AI 或貼回表單前，系統會自動做「換行清理」：去除多餘空行、統一換行符號。</div>
      <pre id="script-out" class="pre"></pre>
    </section>

<section id="builder" class="tab">
      <div class="hint"><b>把「單場完稿」勾選起來 → 一鍵建立「模組課程（活動）」</b><br/>預設存到「草稿」。</div>
      <div class="row gap">
        <input id="builder-q" class="input" placeholder="搜尋單場完稿（標題/標籤/摘要）"/>
        <button id="btn-clear-picks" class="btn ghost">清空勾選</button>
      </div>
      <div id="builder-list" class="list"></div>

      <div class="hr"></div>

      <div class="row gap">
        <input id="module-title" class="input" placeholder="模組課程（活動）名稱（必填）"/>
        <select id="module-target" class="select"><option value="draft">存到：草稿</option><option value="final">存到：完稿</option></select>
      </div>
      <div class="row gap">
        <input id="module-session-min" class="input" placeholder="每堂時間（例：90）可空" inputmode="numeric"/>
        <input id="module-tags" class="input" placeholder="tags（逗號分隔，可空）"/>
      </div>
      <button id="btn-build-module" class="btn primary">建立模組課程（活動）</button>
      <pre id="builder-result" class="pre"></pre>
    </section>

    <section id="api" class="tab">
      <div class="hint">工具庫存（成功網址）</div>
      <code id="tools-api" class="code"></code>
      <button class="btn ghost copy" data-copy="#tools-api">複製驗證碼</button>

      <div class="hint" style="margin-top:10px">課程管理（基底）</div>
      <code id="course-api" class="code"></code>
      <button class="btn ghost copy" data-copy="#course-api">複製驗證碼</button>

      <div class="hr"></div>
      <div class="row gap">
        <button id="btn-ping" class="btn">ping</button>
        <button id="btn-sample-list" class="btn">list final（前 20）</button>
      </div>
      <pre id="api-out" class="pre"></pre>
    </section>

  </section>

  <footer class="footer">
    Angel PWA｜把心站穩，活得自在。任何時候停下來，都可以。只要舒服，就很好。
  </footer>
</main>

<div id="toast" class="toast"></div>
<script src="./app.js"></script>
</body></html>
